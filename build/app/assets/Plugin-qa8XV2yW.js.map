{"version":3,"file":"Plugin-qa8XV2yW.js","sources":["../../../../node_modules/@dhis2/prop-types/build/es/requiredIf.js","../../../../node_modules/@dhis2-ui/checkbox/build/es/checkbox/checkbox-icon.js","../../../../node_modules/@dhis2-ui/checkbox/build/es/checkbox/checkbox.js","../../../../node_modules/@dhis2-ui/node/build/es/leaves.js","../../../../node_modules/@dhis2-ui/node/build/es/spacer.js","../../../../node_modules/@dhis2-ui/node/build/es/toggle.js","../../../../node_modules/@dhis2-ui/node/build/es/node.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/helpers/is-path-included.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/helpers/left-trim-to-root-id.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/helpers/sort-node-children-alphabetically.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/locales/index.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/prop-types.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-node/error-message.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-node/has-descendant-selected-paths.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-node/label/single-selection-label.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-node/label/disabled-selection-label.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-node/label/icon-empty.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-node/label/icon-folder-closed.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-node/label/icon-folder-open.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-node/label/icon-single.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-node/label/icon.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-node/label/iconized-checkbox.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-node/label/label-container.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-node/label/label.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-node/loading-spinner.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-node/use-org-children.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-node/organisation-unit-node-children.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-node/use-open-state.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-node/use-org-data/use-org-data.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-node/organisation-unit-node.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-tree/default-render-node-label/default-render-node-label.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-tree/filter-root-ids.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-tree/organisation-unit-tree-root-error.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-tree/organisation-unit-tree-root-loading.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/get-all-expanded-paths/get-all-expanded-paths.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-tree/use-expanded/create-expand-handlers.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-tree/use-expanded/use-expanded.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-tree/use-force-reload.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-tree/use-root-org-data/patch-missing-display-name.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-tree/use-root-org-data/use-root-org-data.js","../../../../node_modules/@dhis2-ui/organisation-unit-tree/build/es/organisation-unit-tree/organisation-unit-tree.js","../../src/D2App/components/TransferModal.tsx","../../src/D2App/Plugin.tsx"],"sourcesContent":["import propTypes from 'prop-types';\n\nconst isEmpty = value => typeof value === 'undefined' || value === null || value === '';\n\nconst requiredIfFactory = (condition, propType, isRequired) => (props, propName, componentName) => {\n  const propValue = props[propName]; // Usage errors\n\n  if (isRequired) {\n    return new Error(`Property \\`${propName}\\` on component \\`${componentName}\\` is using the \\`requiredIf\\` prop-validator combined with \\`.isRequired\\`. This is an invalid combination.`);\n  }\n\n  if (typeof condition !== 'function') {\n    return new Error(`The \\`condition\\` argument passed to the \\`requiredIf\\` prop-validator was not a function.`);\n  }\n\n  if (typeof propType !== 'function') {\n    return new Error(`The \\`propType\\` argument passed to the \\`requiredIf\\` prop-validator was not a function.`);\n  } // Validation errors\n\n\n  if (condition(props) && isEmpty(propValue)) {\n    return new Error(`Invalid prop \\`${propName}\\` supplied to \\`${componentName}\\`, this prop is conditionally required but has value \\`${propValue}\\`. The condition that made this prop required is: \\`${condition.toString()}\\`.`);\n  } // This is how to programatically invoke a propTypes check\n  // https://github.com/facebook/prop-types#proptypescheckproptypes\n\n\n  propTypes.checkPropTypes({\n    [propName]: propType\n  }, props, 'prop', componentName);\n  return null;\n};\n/**\n * Ensure the prop has a value (i.e. treat it as required) when a given sibling prop\n * also has a value, and ensure the prop is of the correct prop-type\n * @param {function} siblingPropName - The name of the sibling prop\n * @return {Error|null} Returns null if all conditions are met, or an error\n * @example\n * import React from 'react'\n * import { requiredIf } from '@dhis2/prop-types'\n *\n * const Test = ({ someBool, someString }) => (\n *     <div>\n *         <h1>someBool: {someBool ? 'true' : 'false'}</h1>\n *         <h1>someString: {someString}</h1>\n *     </div>\n * )\n * Test.propTypes = {\n *     someBool: propTypes.bool,\n *     someString: requiredIf(props => props.someBool, propTypes.string),\n * }\n */\n\n\nexport function requiredIf(condition, propType) {\n  const fn = requiredIfFactory(condition, propType, false);\n  fn.isRequired = requiredIfFactory(condition, propType, true);\n  return fn;\n}","import _JSXStyle from \"styled-jsx/style\";\nimport { colors } from '@dhis2/ui-constants';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst commonStyles = [\"svg.jsx-4069423049{display:block;pointer-events:none;}\", `svg.jsx-4069423049 .border.jsx-4069423049{fill:${colors.grey800};}`, `svg.jsx-4069423049 .background.jsx-4069423049,svg.jsx-4069423049 .indeterminate.jsx-4069423049,svg.jsx-4069423049 .checkmark.jsx-4069423049{fill:${colors.white};}`, `svg.checked.jsx-4069423049 .background.jsx-4069423049,svg.indeterminate.jsx-4069423049 .background.jsx-4069423049{fill:${colors.teal500};}`, `svg.valid.jsx-4069423049 .background.jsx-4069423049{fill:${colors.blue600};}`, `svg.warning.jsx-4069423049 .background.jsx-4069423049{fill:${colors.yellow700};}`, `svg.error.jsx-4069423049 .background.jsx-4069423049{fill:${colors.red500};}`, `svg.checked.jsx-4069423049 .border.jsx-4069423049,svg.indeterminate.jsx-4069423049 .border.jsx-4069423049{fill:${colors.teal900};}`, \"svg.jsx-4069423049:not(.checked) .checkmark.jsx-4069423049,svg.jsx-4069423049:not(.indeterminate) .indeterminate.jsx-4069423049{fill:none;}\", `svg.jsx-4069423049:not(.checked):not(.indeterminate) .background.jsx-4069423049{fill:${colors.white};}`];\ncommonStyles.__hash = \"4069423049\";\nexport function CheckboxRegular(_ref) {\n  let {\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    viewBox: \"0 0 18 18\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: `jsx-${commonStyles.__hash}` + \" \" + _JSXStyle.dynamic([[\"2753140462\", [colors.grey300, colors.grey400, colors.blue600, colors.blue700, colors.yellow700, colors.yellow800, colors.red500, colors.red700]]]) + \" \" + (className || \"\")\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"0\",\n    y: \"0\",\n    width: \"18\",\n    height: \"18\",\n    rx: \"3\",\n    className: `jsx-${commonStyles.__hash}` + \" \" + _JSXStyle.dynamic([[\"2753140462\", [colors.grey300, colors.grey400, colors.blue600, colors.blue700, colors.yellow700, colors.yellow800, colors.red500, colors.red700]]]) + \" \" + \"background\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15,0 C16.6568542,0 18,1.34314575 18,3 L18,15 C18,16.6568542 16.6568542,18 15,18 L3,18 C1.34314575,18 0,16.6568542 0,15 L0,3 C0,1.34314575 1.34314575,0 3,0 L15,0 Z M15,1 L3,1 C1.9456382,1 1.08183488,1.81587779 1.00548574,2.85073766 L1,3 L1,15 C1,16.0543618 1.81587779,16.9181651 2.85073766,16.9945143 L3,17 L15,17 C16.0543618,17 16.9181651,16.1841222 16.9945143,15.1492623 L17,15 L17,3 C17,1.9456382 16.1841222,1.08183488 15.1492623,1.00548574 L15,1 Z\",\n    className: `jsx-${commonStyles.__hash}` + \" \" + _JSXStyle.dynamic([[\"2753140462\", [colors.grey300, colors.grey400, colors.blue600, colors.blue700, colors.yellow700, colors.yellow800, colors.red500, colors.red700]]]) + \" \" + \"border\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.74451387,8.02852516 C4.39595738,8.11985643 4.12375034,8.39235188 4.03251575,8.74127768 C3.94128115,9.09020348 4.04521722,9.46125864 4.30437605,9.71182782 L7.29823844,12.7078028 C7.68753993,13.0973991 8.31859767,13.0973991 8.70789916,12.7078028 L13.695624,6.71585285 C13.9547828,6.46528367 14.0587189,6.09422851 13.9674843,5.74530271 C13.8762497,5.39637691 13.6040426,5.12388146 13.2554861,5.0325502 C12.9069296,4.94121893 12.5362672,5.04526513 12.2859632,5.30469855 L8.0030688,10.5910713 L5.71403676,8.30067351 C5.46373279,8.0412401 5.09307036,7.9371939 4.74451387,8.02852516 Z\",\n    className: `jsx-${commonStyles.__hash}` + \" \" + _JSXStyle.dynamic([[\"2753140462\", [colors.grey300, colors.grey400, colors.blue600, colors.blue700, colors.yellow700, colors.yellow800, colors.red500, colors.red700]]]) + \" \" + \"checkmark\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"4\",\n    y: \"8\",\n    width: \"10\",\n    height: \"2\",\n    rx: \"1\",\n    className: `jsx-${commonStyles.__hash}` + \" \" + _JSXStyle.dynamic([[\"2753140462\", [colors.grey300, colors.grey400, colors.blue600, colors.blue700, colors.yellow700, colors.yellow800, colors.red500, colors.red700]]]) + \" \" + \"indeterminate\"\n  }), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: commonStyles.__hash\n  }, commonStyles), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"2753140462\",\n    dynamic: [colors.grey300, colors.grey400, colors.blue600, colors.blue700, colors.yellow700, colors.yellow800, colors.red500, colors.red700]\n  }, [\"svg.__jsx-style-dynamic-selector{width:18px;height:18px;}\", `svg.disabled.__jsx-style-dynamic-selector .background.__jsx-style-dynamic-selector{fill:${colors.grey300};}`, `svg.disabled.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${colors.grey400};}`, `svg.valid.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${colors.blue600};}`, `svg.valid.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.valid.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${colors.blue700};}`, `svg.warning.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${colors.yellow700};}`, `svg.warning.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.warning.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${colors.yellow800};}`, `svg.error.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${colors.red500};}`, `svg.error.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.error.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${colors.red700};}`]));\n}\nCheckboxRegular.propTypes = {\n  className: PropTypes.string\n};\nexport function CheckboxDense(_ref2) {\n  let {\n    className\n  } = _ref2;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    viewBox: \"0 0 14 14\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: `jsx-${commonStyles.__hash}` + \" \" + _JSXStyle.dynamic([[\"86695588\", [colors.grey400, colors.grey400, colors.grey500, colors.blue600, colors.blue800, colors.yellow700, colors.yellow800, colors.red500, colors.red800]]]) + \" \" + (className || \"\")\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"0\",\n    y: \"0\",\n    width: \"14\",\n    height: \"14\",\n    rx: \"2\",\n    className: `jsx-${commonStyles.__hash}` + \" \" + _JSXStyle.dynamic([[\"86695588\", [colors.grey400, colors.grey400, colors.grey500, colors.blue600, colors.blue800, colors.yellow700, colors.yellow800, colors.red500, colors.red800]]]) + \" \" + \"background\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2,0 L12,0 C13.1045695,0 14,0.8954305 14,2 L14,12 C14,13.1045695 13.1045695,14 12,14 L2,14 C0.8954305,14 0,13.1045695 0,12 L0,2 C0,0.8954305 0.8954305,0 2,0 Z M2,1 C1.44771525,1 1,1.44771525 1,2 L1,12 C1,12.5522847 1.44771525,13 2,13 L12,13 C12.5522847,13 13,12.5522847 13,12 L13,2 C13,1.44771525 12.5522847,1 12,1 L2,1 Z\",\n    className: `jsx-${commonStyles.__hash}` + \" \" + _JSXStyle.dynamic([[\"86695588\", [colors.grey400, colors.grey400, colors.grey500, colors.blue600, colors.blue800, colors.yellow700, colors.yellow800, colors.red500, colors.red800]]]) + \" \" + \"border\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.3520005,3.30015877 L5.54268293,8.03252726 L3.64634146,6.16652726 L2.28668615,7.5044281 L5.54310367,10.7010587 L11.7145993,4.628307 L10.3520005,3.30015877 Z M5.54268293,9.43547274 L5.61193184,9.36733181 L5.54226219,9.29894127 L5.47309681,9.367 L5.54268293,9.43547274 Z M10.6496329,4.41023392 L10.6495057,4.35652297 L10.5648412,4.35672356 L10.2854007,4.631693 L10.3553166,4.69984123 L10.6496329,4.41023392 Z M3.42891348,7.22439304 L3.35030905,7.22439304 L3.35034135,7.27820863 L3.64634146,7.56947274 L3.71331385,7.5035719 L3.42891348,7.22439304 Z\",\n    className: `jsx-${commonStyles.__hash}` + \" \" + _JSXStyle.dynamic([[\"86695588\", [colors.grey400, colors.grey400, colors.grey500, colors.blue600, colors.blue800, colors.yellow700, colors.yellow800, colors.red500, colors.red800]]]) + \" \" + \"checkmark\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"3\",\n    y: \"6\",\n    width: \"8\",\n    height: \"2\",\n    className: `jsx-${commonStyles.__hash}` + \" \" + _JSXStyle.dynamic([[\"86695588\", [colors.grey400, colors.grey400, colors.grey500, colors.blue600, colors.blue800, colors.yellow700, colors.yellow800, colors.red500, colors.red800]]]) + \" \" + \"indeterminate\"\n  }), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: commonStyles.__hash\n  }, commonStyles), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"86695588\",\n    dynamic: [colors.grey400, colors.grey400, colors.grey500, colors.blue600, colors.blue800, colors.yellow700, colors.yellow800, colors.red500, colors.red800]\n  }, [\"svg.__jsx-style-dynamic-selector{width:14px;height:14px;}\", `svg.disabled.__jsx-style-dynamic-selector .background.__jsx-style-dynamic-selector{fill:${colors.grey400};}`, `svg.disabled.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${colors.grey400};}`, `svg.disabled.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.disabled.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${colors.grey500};}`, `svg.valid.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${colors.blue600};}`, `svg.valid.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.valid.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${colors.blue800};}`, `svg.warning.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${colors.yellow700};}`, `svg.warning.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.warning.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${colors.yellow800};}`, `svg.error.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${colors.red500};}`, `svg.error.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.error.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${colors.red800};}`]));\n}\nCheckboxDense.propTypes = {\n  className: PropTypes.string\n};","import _JSXStyle from \"styled-jsx/style\";\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport { mutuallyExclusive } from '@dhis2/prop-types';\nimport { colors, spacers, theme, sharedPropTypes } from '@dhis2/ui-constants';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { Component, createRef } from 'react';\nimport { CheckboxRegular, CheckboxDense } from './checkbox-icon.js';\nclass Checkbox extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"ref\", /*#__PURE__*/createRef());\n    _defineProperty(this, \"handleChange\", e => {\n      if (this.props.onChange) {\n        this.props.onChange(this.createHandlerPayload(), e);\n      }\n    });\n    _defineProperty(this, \"handleBlur\", e => {\n      if (this.props.onBlur) {\n        this.props.onBlur(this.createHandlerPayload(), e);\n      }\n    });\n    _defineProperty(this, \"handleFocus\", e => {\n      if (this.props.onFocus) {\n        this.props.onFocus(this.createHandlerPayload(), e);\n      }\n    });\n    _defineProperty(this, \"handleKeyDown\", e => {\n      if (this.props.onKeyDown) {\n        this.props.onKeyDown(this.createHandlerPayload(), e);\n      }\n    });\n  }\n  componentDidMount() {\n    if (this.props.initialFocus) {\n      this.ref.current.focus();\n    }\n    this.setIndeterminate(this.props.indeterminate);\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.indeterminate !== this.props.indeterminate) {\n      this.setIndeterminate(this.props.indeterminate);\n    }\n  }\n  setIndeterminate(indeterminate) {\n    this.ref.current.indeterminate = indeterminate;\n  }\n  createHandlerPayload() {\n    return {\n      value: this.props.value,\n      name: this.props.name,\n      checked: !this.props.checked\n    };\n  }\n  render() {\n    const {\n      checked = false,\n      indeterminate = false,\n      className,\n      disabled,\n      error,\n      label,\n      name,\n      tabIndex,\n      valid,\n      value,\n      warning,\n      dense,\n      dataTest = 'dhis2-uicore-checkbox'\n    } = this.props;\n    const classes = cx({\n      checked,\n      indeterminate,\n      disabled,\n      valid,\n      error,\n      warning\n    });\n    return /*#__PURE__*/React.createElement(\"label\", {\n      \"data-test\": dataTest,\n      className: _JSXStyle.dynamic([[\"1252368010\", [colors.grey900, theme.disabled, spacers.dp4, theme.focus]]]) + \" \" + (cx(className, {\n        disabled,\n        dense\n      }) || \"\")\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      ref: this.ref,\n      name: name,\n      value: value,\n      checked: checked,\n      disabled: disabled,\n      tabIndex: tabIndex,\n      onChange: this.handleChange,\n      onFocus: this.handleFocus,\n      onKeyDown: this.handleKeyDown,\n      onBlur: this.handleBlur,\n      className: _JSXStyle.dynamic([[\"1252368010\", [colors.grey900, theme.disabled, spacers.dp4, theme.focus]]])\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: _JSXStyle.dynamic([[\"1252368010\", [colors.grey900, theme.disabled, spacers.dp4, theme.focus]]]) + \" \" + (cx('icon', {\n        dense\n      }) || \"\")\n    }, dense ? /*#__PURE__*/React.createElement(CheckboxDense, {\n      className: classes\n    }) : /*#__PURE__*/React.createElement(CheckboxRegular, {\n      className: classes\n    })), label, /*#__PURE__*/React.createElement(_JSXStyle, {\n      id: \"1252368010\",\n      dynamic: [colors.grey900, theme.disabled, spacers.dp4, theme.focus]\n    }, [`label.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;cursor:pointer;color:${colors.grey900};font-size:14px;line-height:19px;}`, \"label.dense.__jsx-style-dynamic-selector{font-size:14px;line-height:16px;}\", `label.disabled.__jsx-style-dynamic-selector{cursor:not-allowed;color:${theme.disabled};}`, \"input.__jsx-style-dynamic-selector{opacity:0;position:absolute;height:18px;width:18px;inset-inline-start:3px;}\", \"label.dense.__jsx-style-dynamic-selector input.__jsx-style-dynamic-selector{height:14px;width:14px;}\", `.icon.__jsx-style-dynamic-selector{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-inline-end:${spacers.dp4};border:2px solid transparent;padding:1px;border-radius:5px;}`, \"label.dense.__jsx-style-dynamic-selector .icon.__jsx-style-dynamic-selector{margin-inline-end:3px;border-radius:4px;}\", `input.__jsx-style-dynamic-selector:focus+.icon.__jsx-style-dynamic-selector{outline:3px solid ${theme.focus};outline-offset:-3px;}`]));\n  }\n}\n_defineProperty(Checkbox, \"defaultProps\", {\n  checked: false,\n  indeterminate: false,\n  dataTest: 'dhis2-uicore-checkbox'\n});\nconst uniqueOnStatePropType = mutuallyExclusive(['checked', 'indeterminate'], PropTypes.bool);\nCheckbox.propTypes = {\n  checked: uniqueOnStatePropType,\n  className: PropTypes.string,\n  dataTest: PropTypes.string,\n  dense: PropTypes.bool,\n  disabled: PropTypes.bool,\n  error: sharedPropTypes.statusPropType,\n  indeterminate: uniqueOnStatePropType,\n  initialFocus: PropTypes.bool,\n  label: PropTypes.node,\n  name: PropTypes.string,\n  tabIndex: PropTypes.string,\n  valid: sharedPropTypes.statusPropType,\n  value: PropTypes.string,\n  warning: sharedPropTypes.statusPropType,\n  onBlur: PropTypes.func,\n  /** Called with signature `(object, event)` */\n  onChange: PropTypes.func,\n  onFocus: PropTypes.func,\n  onKeyDown: PropTypes.func\n};\nexport { Checkbox };","import _JSXStyle from \"styled-jsx/style\";\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nexport const Leaves = _ref => {\n  let {\n    children,\n    open,\n    dataTest\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": dataTest,\n    className: \"jsx-3677374542\" + \" \" + (cx({\n      open\n    }) || \"\")\n  }, children, /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"3677374542\"\n  }, [\"div.jsx-3677374542{height:0;overflow:hidden;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}\", \".open.jsx-3677374542{height:auto;}\"]));\n};\nLeaves.propTypes = {\n  children: PropTypes.node,\n  dataTest: PropTypes.string,\n  open: PropTypes.bool\n};","import _JSXStyle from \"styled-jsx/style\";\nimport React from 'react';\nexport const Spacer = () => /*#__PURE__*/React.createElement(\"div\", {\n  className: \"jsx-2503342345\"\n}, /*#__PURE__*/React.createElement(_JSXStyle, {\n  id: \"2503342345\"\n}, [\"div.jsx-2503342345{width:24px;}\"]));","import _JSXStyle from \"styled-jsx/style\";\nimport { colors } from '@dhis2/ui-constants';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst ArrowDown = () => /*#__PURE__*/React.createElement(\"div\", {\n  className: \"nodeArrow\"\n}, /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  className: \"jsx-4098137027\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.7041 10.3329L12.1495 14.3318C12.0699 14.4213 11.9301 14.4213 11.8505 14.3318L8.29589 10.3329C8.18124 10.2039 8.2728 10 8.44537 10H15.5546C15.7272 10 15.8188 10.2039 15.7041 10.3329Z\",\n  className: \"jsx-4098137027\"\n}), /*#__PURE__*/React.createElement(_JSXStyle, {\n  id: \"4098137027\"\n}, [\"svg.jsx-4098137027{fill:inherit;height:24px;width:24px;vertical-align:middle;pointer-events:none;}\"])));\nexport const Toggle = _ref => {\n  let {\n    open,\n    onOpen,\n    onClose,\n    dataTest\n  } = _ref;\n  const onClick = open ? onClose : onOpen;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": dataTest,\n    onClick: event => onClick && onClick({\n      open: !open\n    }, event),\n    className: _JSXStyle.dynamic([[\"375729792\", [colors.grey400, colors.grey900, colors.grey100]]]) + \" \" + (cx({\n      open\n    }) || \"\")\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: _JSXStyle.dynamic([[\"375729792\", [colors.grey400, colors.grey900, colors.grey100]]])\n  }, /*#__PURE__*/React.createElement(ArrowDown, null)), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"375729792\",\n    dynamic: [colors.grey400, colors.grey900, colors.grey100]\n  }, [\"div.__jsx-style-dynamic-selector{width:24px;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}\", `div.__jsx-style-dynamic-selector:after{background:${colors.grey400};height:calc(100% - 24px);inset-inline-start:12px;position:absolute;top:15px;width:1px;z-index:1;}`, \".open.__jsx-style-dynamic-selector:after{content:'';}\", `span.__jsx-style-dynamic-selector{display:block;position:relative;z-index:2;fill:${colors.grey900};}`, \"div.__jsx-style-dynamic-selector .nodeArrow{vertical-align:top;-webkit-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg);-webkit-transition:-webkit-transform 0.1s ease-out;-webkit-transition:transform 0.1s ease-out;transition:transform 0.1s ease-out;}\", \"div.__jsx-style-dynamic-selector .nodeArrow:dir(rtl){-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}\", \".open.__jsx-style-dynamic-selector .nodeArrow{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}\", \".open.__jsx-style-dynamic-selector .nodeArrow:dir(rtl){-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}\", `div.__jsx-style-dynamic-selector:hover{cursor:pointer;border-radius:3px;background:${colors.grey100};}`, \"div.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector:after{background:#bcc8d4;}\"]));\n};\nToggle.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  open: PropTypes.bool,\n  onClose: PropTypes.func,\n  onOpen: PropTypes.func\n};","import _JSXStyle from \"styled-jsx/style\";\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Leaves } from './leaves.js';\nimport { Spacer } from './spacer.js';\nimport { Toggle } from './toggle.js';\nexport const Node = _ref => {\n  let {\n    open,\n    className,\n    component: label,\n    children,\n    icon,\n    onOpen,\n    onClose,\n    dataTest = 'dhis2-uicore-node'\n  } = _ref;\n  const hasLeaves = !!React.Children.toArray(children).filter(i => i).length;\n  const showArrow = !icon && hasLeaves;\n  const showSpacer = !icon && !hasLeaves;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": dataTest,\n    className: \"jsx-1433072554\" + \" \" + (cx('node', className) || \"\")\n  }, icon && /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": `${dataTest}-icon`,\n    className: \"jsx-1433072554\"\n  }, icon), showArrow && /*#__PURE__*/React.createElement(Toggle, {\n    open: open,\n    onOpen: onOpen,\n    onClose: onClose,\n    dataTest: `${dataTest}-toggle`\n  }), showSpacer && /*#__PURE__*/React.createElement(Spacer, null), /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": `${dataTest}-content`,\n    className: \"jsx-1433072554\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": `${dataTest}-label`,\n    className: \"jsx-1433072554\"\n  }, label), /*#__PURE__*/React.createElement(Leaves, {\n    open: open,\n    dataTest: `${dataTest}-leaves`\n  }, children)), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"1433072554\"\n  }, [\".node.jsx-1433072554{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}\"]));\n};\nNode.propTypes = {\n  /** Content below this level of the hierarchy; children are revealed when this leaf is 'open' */\n  children: PropTypes.node,\n  className: PropTypes.string,\n  /** Content/label for this leaf, for example a checkbox */\n  component: PropTypes.element,\n  dataTest: PropTypes.string,\n  /** A custom icon to use instead of a toggle arrow */\n  icon: PropTypes.node,\n  open: PropTypes.bool,\n  onClose: PropTypes.func,\n  onOpen: PropTypes.func\n};","/**\n * @param {string[]} includedPaths\n * @param {string} path\n * @returns {bool}\n */\nexport const isPathIncluded = (includedPaths, path) => {\n  const isIncluded = includedPaths.some(includedPath => {\n    if (path === includedPath) {\n      return true;\n    }\n    return includedPath.startsWith(`${path}/`);\n  });\n  return isIncluded;\n};","export const leftTrimToRootId = (path, rootId) => {\n  return path.replace(new RegExp(`^.*(/${rootId})`), '$1');\n};","// sort mutates the original\nexport const sortNodeChildrenAlphabetically = children => [...children].sort((left, right) => left.displayName.localeCompare(right.displayName));","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport csTranslations from './cs/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport es_419Translations from './es_419/translations.json';\nimport frTranslations from './fr/translations.json';\nimport loTranslations from './lo/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport nlTranslations from './nl/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport uz_UZ_CyrlTranslations from './uz_UZ_Cyrl/translations.json';\nimport uz_UZ_LatnTranslations from './uz_UZ_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('es_419', namespace, es_419Translations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('nl', namespace, nlTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('uz_UZ_Cyrl', namespace, uz_UZ_CyrlTranslations);\ni18n.addResources('uz_UZ_Latn', namespace, uz_UZ_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","/* eslint-disable max-params */\n\nconst UNIT_ID_PATTERN = '[a-zA-Z][a-zA-Z0-9]{10}';\nconst orgUnitIdRegExp = new RegExp(`^${UNIT_ID_PATTERN}$`);\nconst orgUnitPathRegExp = new RegExp(`(/${UNIT_ID_PATTERN})+`);\nexport const orgUnitPathPropType = (propValue, key, compName, location, propFullName) => {\n  if (!orgUnitPathRegExp.test(propValue[key])) {\n    return new Error(`Invalid org unit path \\`${propValue[key]}\\` supplied to \\`${compName}.${propFullName}\\``);\n  }\n};\nexport const orgUnitIdPropType = (propValue, key, compName, location, propFullName) => {\n  if (!orgUnitIdRegExp.test(propValue[key])) {\n    return new Error(`Invalid org unit id \\`${propValue[key]}\\` supplied to \\`${compName}.${propFullName}\\``);\n  }\n};","import _JSXStyle from \"styled-jsx/style\";\nimport { colors, spacers, theme } from '@dhis2/ui-constants';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nexport const ErrorMessage = _ref => {\n  let {\n    children,\n    dataTest\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"span\", {\n    \"data-test\": `${dataTest}-error`,\n    className: _JSXStyle.dynamic([[\"3198585030\", [colors.grey800, spacers.dp4, theme.error]]])\n  }, children, /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"3198585030\",\n    dynamic: [colors.grey800, spacers.dp4, theme.error]\n  }, [`span.__jsx-style-dynamic-selector{font-size:14px;color:${colors.grey800};margin:${spacers.dp4};color:${theme.error};}`]));\n};\nErrorMessage.propTypes = {\n  children: PropTypes.any.isRequired,\n  dataTest: PropTypes.string.isRequired\n};","/**\n * Checks wether there are descendants of a path in the\n * array of selected paths\n *\n * @param {string} path\n * @param {string[]} selected\n * @returns {bool}\n */\nexport const hasDescendantSelectedPaths = (path, selected) => {\n  return selected.some(selectedPath => {\n    const isNotPath = !selectedPath.match(new RegExp(`${path}$`));\n    const isSubPath = selectedPath.match(new RegExp(path));\n    return isNotPath && isSubPath;\n  });\n};","import _JSXStyle from \"styled-jsx/style\";\nimport { colors } from '@dhis2/ui-constants';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\n/**\n * @param {Object} props\n * @param {string} props.label\n * @param {bool} [props.checked]\n * @param {bool} [props.loading]\n * @param {Function} [props.onChange]\n * @returns {React.Component}\n */\nexport const SingleSelectionLabel = _ref => {\n  let {\n    checked,\n    children,\n    onChange,\n    loading\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"span\", {\n    onClick: event => {\n      const payload = {\n        checked: !checked\n      };\n      onChange(payload, event);\n    },\n    className: _JSXStyle.dynamic([[\"321503310\", [colors.grey900, colors.teal700]]]) + \" \" + (cx({\n      checked,\n      loading\n    }) || \"\")\n  }, children, /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"321503310\",\n    dynamic: [colors.grey900, colors.teal700]\n  }, [`span.__jsx-style-dynamic-selector{background:transparent;border-radius:3px;color:${colors.grey900};cursor:pointer;display:inline-block;font-size:14px;line-height:24px;padding:0 5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;}`, `.checked.__jsx-style-dynamic-selector{background:${colors.teal700};color:white;}`, \".loading.__jsx-style-dynamic-selector{cursor:auto;}\"]));\n};\nSingleSelectionLabel.propTypes = {\n  children: PropTypes.any.isRequired,\n  checked: PropTypes.bool,\n  loading: PropTypes.bool,\n  onChange: PropTypes.func\n};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { SingleSelectionLabel } from './single-selection-label.js';\n\n/**\n * @param {Object} props\n * @param {string} props.label\n * @param {Function} props.onToggleOpen\n * @param {bool} [props.loading]\n * @returns {React.Component}\n */\nexport const DisabledSelectionLabel = _ref => {\n  let {\n    children,\n    loading,\n    onToggleOpen\n  } = _ref;\n  return /*#__PURE__*/React.createElement(SingleSelectionLabel, {\n    checked: false,\n    loading: loading,\n    onChange: onToggleOpen\n  }, children);\n};\nDisabledSelectionLabel.propTypes = {\n  children: PropTypes.any.isRequired,\n  onToggleOpen: PropTypes.func.isRequired,\n  loading: PropTypes.bool\n};","import _JSXStyle from \"styled-jsx/style\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nexport const IconEmpty = _ref => {\n  let {\n    dataTest\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    height: \"18px\",\n    version: \"1.1\",\n    viewBox: \"0 0 18 18\",\n    width: \"18px\",\n    \"data-test\": `${dataTest}-iconempty`,\n    className: \"jsx-3201893673\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    fill: \"none\",\n    fillRule: \"evenodd\",\n    id: \"icon/empty\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    className: \"jsx-3201893673\"\n  }), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"3201893673\"\n  }, [\"svg.jsx-3201893673{display:block;margin:3px 0;}\"]));\n};\nIconEmpty.propTypes = {\n  dataTest: PropTypes.string.isRequired\n};","import _JSXStyle from \"styled-jsx/style\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nexport const IconFolderClosed = _ref => {\n  let {\n    dataTest\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"18px\",\n    height: \"18px\",\n    viewBox: \"0 0 18 18\",\n    version: \"1.1\",\n    \"data-test\": `${dataTest}-iconfolderclosed`,\n    className: \"jsx-3201893673\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"icon/folder/closed\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    fill: \"none\",\n    fillRule: \"evenodd\",\n    className: \"jsx-3201893673\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2,3.5 C1.17157288,3.5 0.5,4.17157288 0.5,5 L0.5,13 C0.5,13.8284271 1.17157288,14.5 2,14.5 L12,14.5 C12.8284271,14.5 13.5,13.8284271 13.5,13 L13.5,7 C13.5,6.17157288 12.8284271,5.5 12,5.5 L6.69098301,5.5 L5.82917961,3.7763932 C5.7444836,3.60700119 5.57135204,3.5 5.38196601,3.5 L2,3.5 Z\",\n    id: \"Path-2\",\n    stroke: \"#6C7787\",\n    fill: \"#D5DDE5\",\n    className: \"jsx-3201893673\"\n  })), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"3201893673\"\n  }, [\"svg.jsx-3201893673{display:block;margin:3px 0;}\"]));\n};\nIconFolderClosed.propTypes = {\n  dataTest: PropTypes.string.isRequired\n};","import _JSXStyle from \"styled-jsx/style\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nexport const IconFolderOpen = _ref => {\n  let {\n    dataTest\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"18px\",\n    height: \"18px\",\n    viewBox: \"0 0 18 18\",\n    version: \"1.1\",\n    \"data-test\": `${dataTest}-iconfolderopen`,\n    className: \"jsx-2091325045\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"icon/folder/open\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    fill: \"none\",\n    fillRule: \"evenodd\",\n    className: \"jsx-2091325045\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Group\",\n    transform: \"translate(0.000000, 3.000000)\",\n    stroke: \"#6C7787\",\n    className: \"jsx-2091325045\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2,0.5 C1.17157288,0.5 0.5,1.17157288 0.5,2 L0.5,10 C0.5,10.8284271 1.17157288,11.5 2,11.5 L12,11.5 C12.8284271,11.5 13.5,10.8284271 13.5,10 L13.5,4 C13.5,3.17157288 12.8284271,2.5 12,2.5 L6.69098301,2.5 L5.82917961,0.776393202 C5.7444836,0.607001188 5.57135204,0.5 5.38196601,0.5 L2,0.5 Z\",\n    id: \"Path-2\",\n    fill: \"#A0ADBA\",\n    className: \"jsx-2091325045\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1.53632259,10.7093809 C1.47575089,10.7941813 1.44318932,10.8957885 1.44318932,11 C1.44318932,11.2761424 1.66704695,11.5 1.94318932,11.5 L12.4853821,11.5 C12.6468577,11.5 12.7983931,11.4220172 12.8922488,11.2906191 L16.4636774,6.2906191 C16.5242491,6.20581872 16.5568107,6.10421149 16.5568107,6 C16.5568107,5.72385763 16.3329531,5.5 16.0568107,5.5 L5.5146179,5.5 C5.35314234,5.5 5.20160692,5.57798284 5.10775116,5.7093809 L1.53632259,10.7093809 Z\",\n    id: \"Path-3\",\n    fill: \"#FBFCFD\",\n    className: \"jsx-2091325045\"\n  }))), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"2091325045\"\n  }, [\"svg.jsx-2091325045{margin:3px 0;display:block;}\"]));\n};\nIconFolderOpen.propTypes = {\n  dataTest: PropTypes.string.isRequired\n};","import _JSXStyle from \"styled-jsx/style\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nexport const IconSingle = _ref => {\n  let {\n    dataTest\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    height: \"18px\",\n    version: \"1.1\",\n    viewBox: \"0 0 18 18\",\n    width: \"18px\",\n    \"data-test\": `${dataTest}-iconsingle`,\n    className: \"jsx-3201893673\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    fill: \"none\",\n    fillRule: \"evenodd\",\n    id: \"icon/single\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    className: \"jsx-3201893673\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    fill: \"#A0ADBA\",\n    height: \"4\",\n    id: \"Rectangle\",\n    rx: \"1\",\n    width: \"4\",\n    x: \"7\",\n    y: \"7\",\n    className: \"jsx-3201893673\"\n  })), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"3201893673\"\n  }, [\"svg.jsx-3201893673{display:block;margin:3px 0;}\"]));\n};\nIconSingle.propTypes = {\n  dataTest: PropTypes.string.isRequired\n};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { IconEmpty } from './icon-empty.js';\nimport { IconFolderClosed } from './icon-folder-closed.js';\nimport { IconFolderOpen } from './icon-folder-open.js';\nimport { IconSingle } from './icon-single.js';\n\n/**\n * @param {Object} props\n * @param {bool} props.hasChildren\n * @param {bool} props.open\n * @returns {React.Component}\n */\nexport const Icon = _ref => {\n  let {\n    loading,\n    hasChildren,\n    open,\n    dataTest\n  } = _ref;\n  if (loading) {\n    return /*#__PURE__*/React.createElement(IconEmpty, {\n      dataTest: dataTest\n    });\n  }\n  if (!hasChildren) {\n    return /*#__PURE__*/React.createElement(IconSingle, {\n      dataTest: dataTest\n    });\n  }\n  if (open) {\n    return /*#__PURE__*/React.createElement(IconFolderOpen, {\n      dataTest: dataTest\n    });\n  }\n  return /*#__PURE__*/React.createElement(IconFolderClosed, {\n    dataTest: dataTest\n  });\n};\nIcon.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  hasChildren: PropTypes.bool,\n  loading: PropTypes.bool,\n  open: PropTypes.bool\n};","import _JSXStyle from \"styled-jsx/style\";\nimport { Checkbox } from '@dhis2-ui/checkbox';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Icon } from './icon.js';\nexport const IconizedCheckbox = _ref => {\n  let {\n    checked,\n    dataTest,\n    hasChildren,\n    indeterminate,\n    children,\n    loading,\n    name,\n    open,\n    value,\n    onChange\n  } = _ref;\n  const icon = /*#__PURE__*/React.createElement(Icon, {\n    loading: loading,\n    open: open,\n    hasChildren: hasChildren,\n    dataTest: dataTest\n  });\n  const checkboxLabel = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"jsx-1000763175\"\n  }, icon), children, /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"1000763175\"\n  }, [\"span.jsx-1000763175{display:inline-block;margin-inline-end:4px;}\"]));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Checkbox, {\n    dense: true,\n    checked: checked,\n    name: name,\n    value: value,\n    label: checkboxLabel,\n    indeterminate: indeterminate,\n    onChange: onChange\n  }));\n};\nIconizedCheckbox.propTypes = {\n  checked: PropTypes.bool.isRequired,\n  children: PropTypes.any.isRequired,\n  dataTest: PropTypes.string.isRequired,\n  hasChildren: PropTypes.bool.isRequired,\n  indeterminate: PropTypes.bool.isRequired,\n  loading: PropTypes.bool.isRequired,\n  name: PropTypes.string.isRequired,\n  open: PropTypes.bool.isRequired,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};","import _JSXStyle from \"styled-jsx/style\";\nimport { colors } from '@dhis2/ui-constants';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\n/**\n * @param {Object} props\n * @param {bool} props.highlighted\n * @param {React.Component|React.Component[]} props.children\n * @returns {React.Component}\n */\nexport const LabelContainer = _ref => {\n  let {\n    highlighted,\n    children\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: _JSXStyle.dynamic([[\"1387769986\", [colors.teal200]]]) + \" \" + (cx({\n      highlighted\n    }) || \"\")\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: _JSXStyle.dynamic([[\"1387769986\", [colors.teal200]]])\n  }, children), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"1387769986\",\n    dynamic: [colors.teal200]\n  }, [\"div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}\", \"span.__jsx-style-dynamic-selector{display:block;}\", `.highlighted.__jsx-style-dynamic-selector{background:${colors.teal200};padding-inline-end:4px;}`]));\n};\nLabelContainer.propTypes = {\n  children: PropTypes.node,\n  highlighted: PropTypes.bool\n};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { orgUnitPathPropType } from '../../prop-types.js';\nimport { DisabledSelectionLabel } from './disabled-selection-label.js';\nimport { IconizedCheckbox } from './iconized-checkbox.js';\nimport { LabelContainer } from './label-container.js';\nimport { SingleSelectionLabel } from './single-selection-label.js';\nconst createNewSelected = _ref => {\n  let {\n    selected,\n    path,\n    checked,\n    singleSelection\n  } = _ref;\n  const pathIndex = selected.indexOf(path);\n  if (checked && pathIndex !== -1) {\n    return selected;\n  }\n  if (singleSelection && checked) {\n    return [path];\n  }\n  if (checked) {\n    return [...selected, path];\n  }\n  if (pathIndex === -1) {\n    return selected;\n  }\n  if (singleSelection) {\n    return [];\n  }\n  if (selected.indexOf(path) === 0) {\n    return selected.slice(1);\n  }\n  const prevSlice = selected.slice(0, pathIndex);\n  const nextSlice = selected.slice(pathIndex + 1);\n  return [...prevSlice, ...nextSlice];\n};\nconst Label = _ref2 => {\n  let {\n    checked,\n    children,\n    dataTest,\n    disableSelection,\n    fullPath,\n    hasChildren,\n    hasSelectedDescendants,\n    highlighted,\n    loading,\n    node,\n    onChange,\n    onToggleOpen,\n    open,\n    rootId,\n    selected,\n    singleSelection\n  } = _ref2;\n  const onClick = (_ref3, event) => {\n    let {\n      checked\n    } = _ref3;\n    const newSelected = createNewSelected({\n      path: fullPath,\n      selected,\n      checked,\n      singleSelection,\n      rootId\n    });\n\n    // @TODO: It'd make more sense to pass the node as an object\n    // instead of spread it. But that'd be a breaking change\n    const payload = {\n      ...node,\n      path: fullPath,\n      checked,\n      selected: newSelected\n    };\n    onChange(payload, event);\n  };\n  if (disableSelection) {\n    return /*#__PURE__*/React.createElement(LabelContainer, {\n      highlighted: highlighted\n    }, /*#__PURE__*/React.createElement(DisabledSelectionLabel, {\n      loading: loading,\n      onToggleOpen: onToggleOpen\n    }, children));\n  }\n  if (singleSelection) {\n    return /*#__PURE__*/React.createElement(LabelContainer, {\n      highlighted: highlighted\n    }, /*#__PURE__*/React.createElement(SingleSelectionLabel, {\n      checked: checked,\n      onChange: onClick,\n      loading: loading\n    }, children));\n  }\n  return /*#__PURE__*/React.createElement(LabelContainer, {\n    highlighted: highlighted\n  }, /*#__PURE__*/React.createElement(IconizedCheckbox, {\n    dataTest: dataTest,\n    checked: checked,\n    name: \"org-unit\",\n    value: node.id,\n    loading: loading,\n    indeterminate: !checked && hasSelectedDescendants,\n    onChange: onClick,\n    open: open,\n    hasChildren: hasChildren\n  }, children));\n};\nLabel.propTypes = {\n  // This is `any` so it can be customized by the app\n  children: PropTypes.any.isRequired,\n  dataTest: PropTypes.string.isRequired,\n  fullPath: PropTypes.string.isRequired,\n  hasChildren: PropTypes.bool.isRequired,\n  loading: PropTypes.bool.isRequired,\n  node: PropTypes.shape({\n    displayName: PropTypes.string.isRequired,\n    id: PropTypes.string.isRequired,\n    children: PropTypes.number,\n    path: PropTypes.string\n  }).isRequired,\n  open: PropTypes.bool.isRequired,\n  rootId: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onToggleOpen: PropTypes.func.isRequired,\n  checked: PropTypes.bool,\n  disableSelection: PropTypes.bool,\n  hasSelectedDescendants: PropTypes.bool,\n  highlighted: PropTypes.bool,\n  selected: PropTypes.arrayOf(orgUnitPathPropType),\n  singleSelection: PropTypes.bool\n};\nexport { Label };","import _JSXStyle from \"styled-jsx/style\";\nimport { CircularLoader } from '@dhis2-ui/loader';\nimport React from 'react';\nconst loadingSpinnerStyles = {\n  styles: /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"358163430\"\n  }, [\".extrasmall.jsx-358163430{display:block;margin:3px 0;}\"]),\n  className: \"jsx-358163430\"\n};\nexport const LoadingSpinner = () => /*#__PURE__*/React.createElement(\"div\", {\n  className: \"jsx-2503342345\"\n}, /*#__PURE__*/React.createElement(CircularLoader, {\n  extrasmall: true,\n  className: loadingSpinnerStyles.className\n}), /*#__PURE__*/React.createElement(\"style\", null, loadingSpinnerStyles.styles), /*#__PURE__*/React.createElement(_JSXStyle, {\n  id: \"2503342345\"\n}, [\"div.jsx-2503342345{width:24px;}\"]));","import { useDataQuery } from '@dhis2/app-runtime';\nimport { useMemo, useEffect, useRef } from 'react';\nimport { sortNodeChildrenAlphabetically } from '../helpers/index.js';\nconst ORG_DATA_QUERY = {\n  orgUnit: {\n    resource: `organisationUnits`,\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: {\n      fields: 'children[id,path,displayName]'\n    }\n  }\n};\n\n/**\n * @param {string[]} ids\n * @param {Object} options\n * @param {string} options.displayName\n * @param {boolean} [options.withChildren]\n * @returns {Object}\n */\nexport const useOrgChildren = _ref2 => {\n  let {\n    node,\n    suppressAlphabeticalSorting,\n    onComplete\n  } = _ref2;\n  const onCompleteCalledRef = useRef(false);\n  const {\n    called,\n    loading,\n    error,\n    data\n  } = useDataQuery(ORG_DATA_QUERY, {\n    variables: {\n      id: node.id\n    }\n  });\n  const orgChildren = useMemo(() => {\n    if (!data) {\n      return undefined;\n    }\n\n    // undefined or zero\n    if (!node.children) {\n      return [];\n    }\n    const {\n      orgUnit\n    } = data;\n    return suppressAlphabeticalSorting ? orgUnit.children : sortNodeChildrenAlphabetically(orgUnit.children);\n  }, [data, suppressAlphabeticalSorting]);\n  useEffect(() => {\n    if (onComplete && orgChildren && !onCompleteCalledRef.current) {\n      // For backwards compatibility: Pass entire node incl. children\n      onComplete({\n        ...node,\n        children: orgChildren\n      });\n      onCompleteCalledRef.current = true;\n    }\n  }, [onComplete, orgChildren, onCompleteCalledRef]);\n  return {\n    called,\n    loading,\n    error: error || null,\n    data: orgChildren\n  };\n};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { isPathIncluded } from '../helpers/index.js';\nimport i18n from '../locales/index.js';\nimport { orgUnitPathPropType } from '../prop-types.js';\nimport { LoadingSpinner } from './loading-spinner.js';\nimport { useOrgChildren } from './use-org-children.js';\nconst getFilteredChildren = _ref => {\n  let {\n    orgChildren,\n    filter,\n    node\n  } = _ref;\n  if (!(filter !== null && filter !== void 0 && filter.length)) {\n    return orgChildren;\n  }\n  return orgChildren.filter(child => {\n    return isPathIncluded(filter, `${node.path}/${child.id}`);\n  });\n};\nexport const OrganisationUnitNodeChildren = _ref2 => {\n  let {\n    node,\n    autoExpandLoadingError,\n    dataTest,\n    disableSelection,\n    expanded,\n    filter,\n    highlighted,\n    isUserDataViewFallback,\n    onChange,\n    onChildrenLoaded,\n    onCollapse,\n    onExpand,\n    parentPath,\n    renderNodeLabel,\n    rootId,\n    selected,\n    singleSelection,\n    suppressAlphabeticalSorting,\n    OrganisationUnitNode\n  } = _ref2;\n  const orgChildren = useOrgChildren({\n    node,\n    isUserDataViewFallback,\n    suppressAlphabeticalSorting,\n    onComplete: onChildrenLoaded\n  });\n  const displayChildren = orgChildren.called && !orgChildren.loading && !orgChildren.error;\n  const filteredChildren = displayChildren ? getFilteredChildren({\n    orgChildren: orgChildren.data,\n    filter,\n    node\n  }) : [];\n  return /*#__PURE__*/React.createElement(React.Fragment, null, orgChildren.loading && /*#__PURE__*/React.createElement(LoadingSpinner, null), orgChildren.error && `Error: ${orgChildren.error}`, displayChildren && !filteredChildren.length && i18n.t('No children match filter'), !!filteredChildren.length && filteredChildren.map(child => {\n    const childPath = `${parentPath}/${child.id}`;\n    return /*#__PURE__*/React.createElement(OrganisationUnitNode, {\n      autoExpandLoadingError: autoExpandLoadingError,\n      dataTest: dataTest,\n      disableSelection: disableSelection,\n      displayName: child.displayName,\n      expanded: expanded,\n      filter: filter,\n      highlighted: highlighted,\n      id: child.id,\n      isUserDataViewFallback: isUserDataViewFallback,\n      key: childPath,\n      onChange: onChange,\n      onChildrenLoaded: onChildrenLoaded,\n      onCollapse: onCollapse,\n      onExpand: onExpand,\n      path: childPath,\n      renderNodeLabel: renderNodeLabel,\n      rootId: rootId,\n      selected: selected,\n      singleSelection: singleSelection,\n      suppressAlphabeticalSorting: suppressAlphabeticalSorting\n    });\n  }));\n};\nOrganisationUnitNodeChildren.propTypes = {\n  // Prevent cirular imports\n  OrganisationUnitNode: PropTypes.func.isRequired,\n  dataTest: PropTypes.string.isRequired,\n  node: PropTypes.object.isRequired,\n  parentPath: PropTypes.string.isRequired,\n  renderNodeLabel: PropTypes.func.isRequired,\n  rootId: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  autoExpandLoadingError: PropTypes.bool,\n  disableSelection: PropTypes.bool,\n  expanded: PropTypes.arrayOf(orgUnitPathPropType),\n  filter: PropTypes.arrayOf(orgUnitPathPropType),\n  highlighted: PropTypes.arrayOf(orgUnitPathPropType),\n  isUserDataViewFallback: PropTypes.bool,\n  selected: PropTypes.arrayOf(orgUnitPathPropType),\n  singleSelection: PropTypes.bool,\n  suppressAlphabeticalSorting: PropTypes.bool,\n  onChildrenLoaded: PropTypes.func,\n  onCollapse: PropTypes.func,\n  onExpand: PropTypes.func\n};","import { useEffect, useState } from 'react';\n\n/**\n * @param {Object} args\n * @param {string} args.path\n * @param {string} [args.errorMessage]\n * @param {string} [args.autoExpandLoadingError]\n * @param {string[]} args.expanded\n * @param {Function} [args.onExpand]\n * @param {Function} [args.onCollapse]\n * @returns {Object}\n */\nexport const useOpenState = _ref => {\n  let {\n    path,\n    expanded,\n    onExpand,\n    onCollapse,\n    errorMessage,\n    autoExpandLoadingError\n  } = _ref;\n  const autoExpand = autoExpandLoadingError && !!errorMessage;\n  const [openedOnceDueToError, setOpenedOnce] = useState(!!errorMessage);\n  useEffect(() => {\n    if (autoExpand && !openedOnceDueToError) {\n      onExpand({\n        path\n      });\n      setOpenedOnce(true);\n    }\n  }, [autoExpand, openedOnceDueToError]);\n  const open = autoExpand && !openedOnceDueToError || !!expanded.includes(path);\n  const onToggleOpen = () => !open ? onExpand({\n    path\n  }) : onCollapse({\n    path\n  });\n  return {\n    open,\n    onToggleOpen,\n    openedOnceDueToError\n  };\n};","import { useDataQuery } from '@dhis2/app-runtime';\nconst ORG_DATA_QUERY = {\n  orgUnit: {\n    resource: `organisationUnits`,\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: _ref2 => {\n      let {\n        isUserDataViewFallback\n      } = _ref2;\n      return {\n        isUserDataViewFallback,\n        fields: ['path', 'children::size']\n      };\n    }\n  }\n};\n\n/**\n * @param {string[]} ids\n * @param {Object} options\n * @param {string} options.displayName\n * @param {bool} options.isUserDataViewFallback\n * @returns {Object}\n */\nexport const useOrgData = (id, _ref3) => {\n  let {\n    displayName,\n    isUserDataViewFallback\n  } = _ref3;\n  if (!displayName) {\n    throw new Error('\"displayName\" is required');\n  }\n  const variables = {\n    id,\n    isUserDataViewFallback\n  };\n  const {\n    loading,\n    error,\n    data = {}\n  } = useDataQuery(ORG_DATA_QUERY, {\n    variables\n  });\n  return {\n    loading,\n    error: error || null,\n    data: {\n      id,\n      displayName,\n      ...data.orgUnit\n    }\n  };\n};","import { Node } from '@dhis2-ui/node';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { leftTrimToRootId } from '../helpers/index.js';\nimport i18n from '../locales/index.js';\nimport { orgUnitPathPropType } from '../prop-types.js';\nimport { ErrorMessage } from './error-message.js';\nimport { hasDescendantSelectedPaths } from './has-descendant-selected-paths.js';\nimport { Label } from './label/index.js';\nimport { LoadingSpinner } from './loading-spinner.js';\nimport { OrganisationUnitNodeChildren } from './organisation-unit-node-children.js';\nimport { useOpenState } from './use-open-state.js';\nimport { useOrgData } from './use-org-data/index.js';\nexport const OrganisationUnitNode = _ref => {\n  let {\n    autoExpandLoadingError,\n    dataTest,\n    disableSelection,\n    displayName,\n    expanded,\n    highlighted,\n    id,\n    isUserDataViewFallback,\n    path,\n    renderNodeLabel,\n    rootId,\n    selected,\n    singleSelection,\n    filter,\n    suppressAlphabeticalSorting,\n    onChange,\n    onChildrenLoaded,\n    onCollapse,\n    onExpand\n  } = _ref;\n  const orgData = useOrgData(id, {\n    isUserDataViewFallback,\n    displayName\n  });\n  const strippedPath = leftTrimToRootId(path, rootId);\n  const node = {\n    // guarantee that displayName and id are avaiable before data loaded\n    displayName,\n    id,\n    ...(orgData.data || {}),\n    // do not override strippedPath with path from loaded data\n    path: strippedPath\n  };\n  const hasChildren = !!node.children && node.children > 0;\n  const hasSelectedDescendants = hasDescendantSelectedPaths(strippedPath, selected, rootId);\n  const isHighlighted = highlighted.includes(path);\n  const {\n    open,\n    onToggleOpen\n  } = useOpenState({\n    autoExpandLoadingError,\n    errorMessage: orgData.error && orgData.error.toString(),\n    path: strippedPath,\n    expanded,\n    onExpand,\n    onCollapse\n  });\n  const isSelected = !!selected.find(curPath => curPath.match(new RegExp(`${strippedPath}$`)));\n  const labelContent = renderNodeLabel({\n    disableSelection,\n    hasChildren,\n    hasSelectedDescendants,\n    loading: orgData.loading,\n    error: orgData.error,\n    selected,\n    open,\n    path,\n    singleSelection,\n    node,\n    label: displayName,\n    checked: isSelected,\n    highlighted: isHighlighted\n  });\n  const label = /*#__PURE__*/React.createElement(Label, {\n    node: node,\n    fullPath: path,\n    open: open,\n    loading: orgData.loading,\n    checked: isSelected,\n    rootId: rootId,\n    onChange: onChange,\n    dataTest: `${dataTest}-label`,\n    selected: selected,\n    hasChildren: hasChildren,\n    highlighted: isHighlighted,\n    onToggleOpen: onToggleOpen,\n    disableSelection: disableSelection,\n    singleSelection: singleSelection,\n    hasSelectedDescendants: hasSelectedDescendants\n  }, labelContent);\n\n  /**\n   * No children means no arrow, therefore we have to provide something.\n   * While \"loading\" is true, \"hasChildren\" is false\n   * There are some possible children variants as content of this node:\n   *\n   * 1. Nothing; There are no children\n   * 2. Placeholder: There are children, but the Node is closed (show arrow)\n   * 3. Error: There are children and loading information somehow failed\n   * 4. Child nodes: There are children and the node is open\n   */\n  const showPlaceholder = hasChildren && !open && !orgData.error;\n  const showChildNodes = hasChildren && open && !orgData.error;\n  return /*#__PURE__*/React.createElement(Node, {\n    dataTest: `${dataTest}-node`,\n    open: open,\n    onOpen: onToggleOpen,\n    onClose: onToggleOpen,\n    component: label,\n    icon: orgData.loading && /*#__PURE__*/React.createElement(LoadingSpinner, null)\n  }, orgData.error && /*#__PURE__*/React.createElement(ErrorMessage, {\n    dataTest: dataTest\n  }, i18n.t('Could not load children')), showPlaceholder && /*#__PURE__*/React.createElement(\"span\", {\n    \"data-test\": `${dataTest}-placeholder`\n  }), showChildNodes && /*#__PURE__*/React.createElement(OrganisationUnitNodeChildren\n  // Prevent cirular imports\n  , {\n    OrganisationUnitNode: OrganisationUnitNode,\n    node: node,\n    autoExpandLoadingError: autoExpandLoadingError,\n    dataTest: dataTest,\n    disableSelection: disableSelection,\n    expanded: expanded,\n    filter: filter,\n    highlighted: highlighted,\n    isUserDataViewFallback: isUserDataViewFallback,\n    onChange: onChange,\n    onChildrenLoaded: onChildrenLoaded,\n    onCollapse: onCollapse,\n    onExpand: onExpand,\n    parentPath: path,\n    renderNodeLabel: renderNodeLabel,\n    rootId: rootId,\n    selected: selected,\n    singleSelection: singleSelection,\n    suppressAlphabeticalSorting: suppressAlphabeticalSorting\n  }));\n};\nOrganisationUnitNode.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  id: PropTypes.string.isRequired,\n  renderNodeLabel: PropTypes.func.isRequired,\n  rootId: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  autoExpandLoadingError: PropTypes.bool,\n  disableSelection: PropTypes.bool,\n  displayName: PropTypes.string,\n  expanded: PropTypes.arrayOf(orgUnitPathPropType),\n  filter: PropTypes.arrayOf(orgUnitPathPropType),\n  highlighted: PropTypes.arrayOf(orgUnitPathPropType),\n  isUserDataViewFallback: PropTypes.bool,\n  path: orgUnitPathPropType,\n  selected: PropTypes.arrayOf(orgUnitPathPropType),\n  singleSelection: PropTypes.bool,\n  suppressAlphabeticalSorting: PropTypes.bool,\n  onChildrenLoaded: PropTypes.func,\n  onCollapse: PropTypes.func,\n  onExpand: PropTypes.func\n};","export const defaultRenderNodeLabel = _ref => {\n  let {\n    label\n  } = _ref;\n  return label;\n};","import { isPathIncluded } from '../helpers/index.js';\nexport const filterRootIds = (filter, rootIds) => {\n  if (!(filter !== null && filter !== void 0 && filter.length)) {\n    return rootIds;\n  }\n  return rootIds.filter(rootId => isPathIncluded(filter, `/${rootId}`));\n};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../locales/index.js';\nexport const OrganisationUnitTreeRootError = _ref => {\n  let {\n    dataTest = 'dhis2-uiwidgets-orgunittree-error',\n    error\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": dataTest\n  }, i18n.t('Error: {{ ERRORMESSAGE }}', {\n    ERRORMESSAGE: error,\n    nsSeparator: '>'\n  }));\n};\nOrganisationUnitTreeRootError.propTypes = {\n  error: PropTypes.string.isRequired,\n  dataTest: PropTypes.string\n};","import _JSXStyle from \"styled-jsx/style\";\nimport { CircularLoader } from '@dhis2-ui/loader';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nexport const OrganisationUnitTreeRootLoading = _ref => {\n  let {\n    dataTest = 'dhis2-uiwidgets-orgunittree-loading'\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": dataTest,\n    className: \"jsx-814846266\"\n  }, /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  }), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"814846266\"\n  }, [\"div.jsx-814846266{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}\"]));\n};\nOrganisationUnitTreeRootLoading.propTypes = {\n  dataTest: PropTypes.string\n};","/**\n * @template T\n * @param {Array.<T>} arr\n * @returns {Array.<T>}\n */\nconst removeDuplicates = arr => Array.from(new Set(arr));\n\n/**\n * @param {string} path\n * @returns {string[]}\n */\nconst extractAllPathsFromPath = path => {\n  // remove leading slash and split by path delimiter/slashes\n  const segments = path.replace(/^\\//, '').split('/');\n  const withSubPaths = segments.map((segment, index) => {\n    // take all segments from 0 to index and join them with the delimiter\n    return `/${segments.slice(0, index + 1).join('/')}`;\n  });\n  return removeDuplicates(withSubPaths);\n};\n\n/**\n * @param {string[]} initiallyExpanded\n * @returns {string[]}\n */\nexport const getAllExpandedPaths = initiallyExpanded => initiallyExpanded.reduce((all, curPath) => {\n  const allPathsInCurPath = extractAllPathsFromPath(curPath);\n  return [...all, ...allPathsInCurPath];\n}, []);","/**\n * @param {Object} args\n * @param {string[]} args.expanded\n * @param {Function} args.setExpanded\n * @param {Function} [args.onExpand]\n * @param {Function} [args.onCollapse]\n * @returns {{ handleExpand: Function, handleCollapse: Function }}\n */\nexport const createExpandHandlers = _ref => {\n  let {\n    expanded,\n    setExpanded,\n    onExpand,\n    onCollapse\n  } = _ref;\n  const handleExpand = _ref2 => {\n    let {\n      path,\n      ...rest\n    } = _ref2;\n    if (!expanded.includes(path)) {\n      setExpanded([...expanded, path]);\n      if (onExpand) {\n        onExpand({\n          path,\n          ...rest\n        });\n      }\n    }\n  };\n  const handleCollapse = _ref3 => {\n    let {\n      path,\n      ...rest\n    } = _ref3;\n    const pathIndex = expanded.indexOf(path);\n    if (pathIndex !== -1) {\n      const updatedExpanded = pathIndex === 0 ? expanded.slice(1) : [...expanded.slice(0, pathIndex), ...expanded.slice(pathIndex + 1)];\n      setExpanded(updatedExpanded);\n      if (onCollapse) {\n        onCollapse({\n          path,\n          ...rest\n        });\n      }\n    }\n  };\n  return {\n    handleExpand,\n    handleCollapse\n  };\n};","import { useState } from 'react';\nimport { getAllExpandedPaths } from '../../get-all-expanded-paths/index.js';\nimport { createExpandHandlers } from './create-expand-handlers.js';\n\n/**\n * @param {string[]} initiallyExpanded\n * @param {Function} [onExpand]\n * @param {Function} [onCollapse]\n * @returns {{ expanded: string[], handleExpand: Function, handleCollapse: Function }}\n */\nexport const useExpanded = _ref => {\n  let {\n    initiallyExpanded,\n    onExpand,\n    onCollapse,\n    expandedControlled,\n    handleExpandControlled,\n    handleCollapseControlled\n  } = _ref;\n  const isControlled = !!expandedControlled;\n  const allInitiallyExpandedPaths = isControlled ? [] : getAllExpandedPaths(initiallyExpanded);\n  const [expanded, setExpanded] = useState(allInitiallyExpandedPaths);\n  if (isControlled) {\n    return {\n      expanded: expandedControlled,\n      handleExpand: handleExpandControlled,\n      handleCollapse: handleCollapseControlled\n    };\n  }\n  const {\n    handleExpand,\n    handleCollapse\n  } = createExpandHandlers({\n    expanded,\n    setExpanded,\n    onExpand,\n    onCollapse\n  });\n  return {\n    expanded,\n    handleExpand,\n    handleCollapse\n  };\n};","import { useEffect, useState } from 'react';\n\n/**\n * This will create a new reloadId everytime \"forceReload\" changes to true,\n * which can be used as the \"key\" prop on the org unit tree.\n * When that id changes, the whole tree rerenders\n * and therefore triggers all \"useDataQuery\"s to\n * run the query again\n *\n * @param {bool} forceReload\n * @returns {Int}\n */\nexport const useForceReload = forceReload => {\n  const [reloadId, setReloadId] = useState(0);\n  useEffect(() => {\n    const nextReloadId = reloadId + 1;\n    forceReload === true && setReloadId(nextReloadId);\n  }, [forceReload]);\n  return reloadId;\n};","/**\n * Note by JGS: I can't recall why this is necessary,\n * but it's there.. So I guess it's better to leave it in for now\n * and investigate why this is necessary in the first place!\n * Maybe we can omit this completely and remove the state from\n * the useRootOrgData hook entirely\n * @TODO: Investigate if this could be removed\n *\n * @param {Object[]} nodes\n * @returns {}\n */\nexport const patchMissingDisplayName = nodes => {\n  const nodeEntries = Object.entries(nodes);\n  const nodesWithDisplayName = nodeEntries.map(_ref => {\n    let [id, node] = _ref;\n    const displayName = node.displayName || '';\n    return [id, {\n      ...node,\n      displayName\n    }];\n  });\n  return Object.fromEntries(nodesWithDisplayName);\n};","import { useDataQuery } from '@dhis2/app-runtime';\nimport { useMemo } from 'react';\nimport { patchMissingDisplayName } from './patch-missing-display-name.js';\nexport const createRootQuery = ids => ids.reduce((query, id) => ({\n  ...query,\n  [id]: {\n    id,\n    resource: `organisationUnits`,\n    params: _ref => {\n      let {\n        isUserDataViewFallback\n      } = _ref;\n      return {\n        isUserDataViewFallback,\n        fields: ['displayName', 'path', 'id']\n      };\n    }\n  }\n}), {});\n\n/**\n * @param {string[]} ids\n * @param {Object} [options]\n * @param {boolean} [options.withChildren]\n * @param {boolean} [options.isUserDataViewFallback]\n * @returns {Object}\n */\nexport const useRootOrgData = function (ids) {\n  let {\n    isUserDataViewFallback\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const query = useMemo(() => createRootQuery(ids), [ids]);\n  const variables = {\n    isUserDataViewFallback\n  };\n  const rootOrgUnits = useDataQuery(query, {\n    variables\n  });\n  const {\n    called,\n    loading,\n    error,\n    data,\n    refetch\n  } = rootOrgUnits;\n  const patchedData = useMemo(() => {\n    return data ? patchMissingDisplayName(data) : data;\n  }, [data]);\n  return {\n    called,\n    loading,\n    error: error || null,\n    data: patchedData || null,\n    refetch\n  };\n};","import { requiredIf } from '@dhis2/prop-types';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { OrganisationUnitNode } from '../organisation-unit-node/index.js';\nimport { orgUnitPathPropType } from '../prop-types.js';\nimport { defaultRenderNodeLabel } from './default-render-node-label/index.js';\nimport { filterRootIds } from './filter-root-ids.js';\nimport { OrganisationUnitTreeRootError } from './organisation-unit-tree-root-error.js';\nimport { OrganisationUnitTreeRootLoading } from './organisation-unit-tree-root-loading.js';\nimport { useExpanded } from './use-expanded/index.js';\nimport { useForceReload } from './use-force-reload.js';\nimport { useRootOrgData } from './use-root-org-data/index.js';\n\n// A stable object to reference\nconst staticArray = [];\nconst OrganisationUnitTree = _ref => {\n  let {\n    onChange,\n    roots,\n    autoExpandLoadingError,\n    dataTest = 'dhis2-uiwidgets-orgunittree',\n    disableSelection,\n    forceReload,\n    highlighted = staticArray,\n    isUserDataViewFallback,\n    initiallyExpanded = staticArray,\n    filter = staticArray,\n    renderNodeLabel = defaultRenderNodeLabel,\n    selected = staticArray,\n    singleSelection,\n    suppressAlphabeticalSorting,\n    expanded: expandedControlled,\n    handleExpand: handleExpandControlled,\n    handleCollapse: handleCollapseControlled,\n    onExpand,\n    onCollapse,\n    onChildrenLoaded\n  } = _ref;\n  const rootIds = filterRootIds(filter, Array.isArray(roots) ? roots : [roots]);\n  const reloadId = useForceReload(forceReload);\n  const [prevReloadId, setPrevReloadId] = useState(reloadId);\n  const {\n    called,\n    loading,\n    error,\n    data,\n    refetch\n  } = useRootOrgData(rootIds, {\n    isUserDataViewFallback,\n    suppressAlphabeticalSorting\n  });\n  const {\n    expanded,\n    handleExpand,\n    handleCollapse\n  } = useExpanded({\n    initiallyExpanded,\n    onExpand,\n    onCollapse,\n    expandedControlled,\n    handleExpandControlled,\n    handleCollapseControlled\n  });\n  useEffect(() => {\n    // do not refetch on initial render\n    if (refetch && reloadId > 0 && reloadId !== prevReloadId) {\n      refetch();\n      setPrevReloadId(reloadId);\n    }\n    return () => console.warn('@TODO: Why does this component unmount after a force reload?');\n  }, [reloadId, prevReloadId, refetch]);\n  const isLoading = !called || loading;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": dataTest\n  }, isLoading && /*#__PURE__*/React.createElement(OrganisationUnitTreeRootLoading, null), error && /*#__PURE__*/React.createElement(OrganisationUnitTreeRootError, {\n    error: error\n  }), !error && !isLoading && rootIds.map(rootId => {\n    const rootNode = data[rootId];\n    return /*#__PURE__*/React.createElement(OrganisationUnitNode, {\n      key: rootNode.path,\n      rootId: rootId,\n      autoExpandLoadingError: autoExpandLoadingError,\n      dataTest: dataTest,\n      disableSelection: disableSelection,\n      displayName: rootNode.displayName,\n      expanded: expanded,\n      highlighted: highlighted,\n      id: rootId,\n      isUserDataViewFallback: isUserDataViewFallback,\n      filter: filter,\n      path: rootNode.path,\n      renderNodeLabel: renderNodeLabel,\n      selected: selected,\n      singleSelection: singleSelection,\n      suppressAlphabeticalSorting: suppressAlphabeticalSorting,\n      onChange: onChange,\n      onChildrenLoaded: onChildrenLoaded,\n      onCollapse: handleCollapse,\n      onExpand: handleExpand\n    });\n  }));\n};\nOrganisationUnitTree.propTypes = {\n  /** Root org unit ID(s) */\n  roots: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]).isRequired,\n  /** Will be called with the following object:\n   * `{ id: string, displayName: string, path: string, checked: boolean, selected: string[] }` */\n  onChange: PropTypes.func.isRequired,\n  /** When set, the error when loading children fails will be shown automatically */\n  autoExpandLoadingError: PropTypes.bool,\n  dataTest: PropTypes.string,\n  /** When set to true, no unit can be selected */\n  disableSelection: PropTypes.bool,\n  expanded: requiredIf(props => !!props.handleExpand || !!props.handleCollapse, PropTypes.arrayOf(PropTypes.string)),\n  /**\n   * All organisation units with a path that includes the provided paths will be shown.\n   * All others will not be rendered. When not provided, all org units will be shown.\n   */\n  filter: PropTypes.arrayOf(orgUnitPathPropType),\n  /** When true, everything will be reloaded. In order to load it again after reloading, `forceReload` has to be set to `false` and then to `true` again */\n  forceReload: PropTypes.bool,\n  handleCollapse: requiredIf(props => !!props.expanded || !!props.handleExpand, PropTypes.func),\n  handleExpand: requiredIf(props => !!props.expanded || !!props.handleCollapse, PropTypes.func),\n  /**\n   * All units provided to \"highlighted\" as path will be visually\n   * highlighted.\n   * Note:\n   * The d2-ui component used two props for this:\n   * * searchResults\n   * * highlightSearchResults\n   */\n  highlighted: PropTypes.arrayOf(orgUnitPathPropType),\n  /**\n   * An array of OU paths that will be expanded automatically\n   * as soon as they are encountered.\n   * The path of an OU is the UIDs of the OU\n   * and all its parent OUs separated by slashes (/)\n   * Note: This replaces \"openFirstLevel\" as that's redundant\n   */\n  initiallyExpanded: PropTypes.arrayOf(orgUnitPathPropType),\n  /** When provided, the 'isUserDataViewFallback' option will be sent when requesting the org units */\n  isUserDataViewFallback: PropTypes.bool,\n  /** Renders the actual node component for each leaf, can be used to\n   * customize the node. The default function just returns the node's\n   * displayName\n   *\n   * Shape of the object passed to the callback:\n   * ```\n   * {\n   *    label: string,\n   *    node: {\n   *      displayName: string,\n   *      id: string,\n   *      // Only provided once `loading` is false\n   *      path?: string,\n   *      // Only provided once `loading` is false\n   *      children?: Array.<{\n   *        id: string,\n   *        path: string,\n   *        displayName: string\n   *      }>\n   *    },\n   *    loading: boolean,\n   *    error: string,\n   *    open: boolean,\n   *    selected: string[],\n   *    singleSelection: boolean,\n   *    disableSelection: boolean,\n   * }\n   * ``` */\n  renderNodeLabel: PropTypes.func,\n  /** An array of paths of selected OUs. The path of an OU is the UIDs of the OU and all its parent OUs separated by slashes (`/`) */\n  selected: PropTypes.arrayOf(orgUnitPathPropType),\n  /** When set, no checkboxes will be displayed and only the first selected path in `selected` will be highlighted */\n  singleSelection: PropTypes.bool,\n  /** Turns off alphabetical sorting of units */\n  suppressAlphabeticalSorting: PropTypes.bool,\n  /** Called with the children's data that was loaded */\n  onChildrenLoaded: PropTypes.func,\n  /** Called with `{ path: string }` with the path of the parent of the level closed */\n  onCollapse: PropTypes.func,\n  /** Called with `{ path: string }` with the path of the parent of the level opened */\n  onExpand: PropTypes.func\n\n  /**\n   * All units with ids (not paths!) provided\n   * to \"idsThatShouldBeReloaded\" will be reloaded\n   * In order to reload an id twice, the array must be changed\n   * while keeping the id to reload in the array\n   *\n   * NOTE: This is currently not working due to a limitation\n   * of the data engine (we can't force specific resource to reload,\n   * we'd have to reload the sibling nodes currently as well)\n   */\n  //idsThatShouldBeReloaded: propTypes.arrayOf(orgUnitIdPropType),\n};\nexport { OrganisationUnitTree };","import React, { useEffect, useMemo, useState } from 'react'\nimport { useDataEngine, useDataQuery } from '@dhis2/app-runtime'\nimport {\n  Box,\n  Button,\n  ButtonStrip,\n  Field,\n  Input,\n  Modal,\n  ModalActions,\n  ModalContent,\n  ModalTitle,\n  NoticeBox,\n  OrganisationUnitTree,\n} from '@dhis2/ui'\n\ntype OrgUnit = {\n  id: string\n  displayName: string\n  path?: string\n}\n\ntype TrackedEntity = {\n  trackedEntity: string\n  trackedEntityType?: string\n  orgUnit?: string\n  enrollments?: Array<{\n    enrollment: string\n    program: string\n    orgUnit?: string\n    status?: string\n    occurredAt?: string\n    enrolledAt?: string\n    events?: Array<{\n      event: string\n      program?: string\n      programStage?: string\n      orgUnit?: string\n      status?: string\n      occurredAt?: string\n      scheduledAt?: string\n    }>\n  }>\n}\n\nconst rootsQuery = {\n  roots: {\n    resource: 'organisationUnits',\n    params: {\n      userOnly: true,\n      fields: 'id,displayName,path',\n    },\n  },\n}\n\nconst trackerFields =\n  'trackedEntityType,orgUnit,enrollments[enrollment,program,orgUnit,status,occurredAt,enrolledAt,events[event,program,programStage,orgUnit,status,occurredAt,scheduledAt]]'\n\ntype TransferModalProps = {\n  initialTeiId?: string\n  programId?: string\n  currentOrgUnitId?: string\n  onClose: () => void\n  mode?: 'modal' | 'inline'\n}\n\nconst UPDATE_ENROLLMENT_ORGUNIT = false\nconst MIN_SEARCH_LENGTH = 2\nconst SEARCH_DEBOUNCE_MS = 300\n\nconst getValidationMessage = (error: unknown) => {\n  if (!error || typeof error !== 'object') {\n    return 'Transfer failed.'\n  }\n\n  const message = (error as { message?: string }).message\n  const responseMessage = (error as { details?: { response?: { data?: { message?: string } } } })\n    .details?.response?.data?.message\n  if (responseMessage) {\n    return responseMessage\n  }\n  if (message) {\n    return message\n  }\n\n  return 'Transfer failed.'\n}\n\nconst useDebouncedValue = (value: string, delay: number) => {\n  const [debouncedValue, setDebouncedValue] = useState(value)\n\n  useEffect(() => {\n    const timeoutId = window.setTimeout(() => {\n      setDebouncedValue(value)\n    }, delay)\n\n    return () => {\n      window.clearTimeout(timeoutId)\n    }\n  }, [value, delay])\n\n  return debouncedValue\n}\n\nconst isUnknownParamError = (error: unknown, paramName: string) => {\n  const status = (error as { details?: { response?: { status?: number } } })?.details?.response\n    ?.status\n  if (!status || status < 400 || status >= 500) {\n    return false\n  }\n\n  const message = getValidationMessage(error).toLowerCase()\n  return (\n    message.includes('unknown parameter') ||\n    (message.includes('parameter') && message.includes(paramName.toLowerCase()))\n  )\n}\n\nclass TreeErrorBoundary extends React.Component<\n  { onError: (message: string) => void; children: React.ReactNode },\n  { hasError: boolean }\n> {\n  constructor(props: { onError: (message: string) => void; children: React.ReactNode }) {\n    super(props)\n    this.state = { hasError: false }\n  }\n\n  static getDerivedStateFromError() {\n    return { hasError: true }\n  }\n\n  componentDidCatch() {\n    this.props.onError('Failed to render org unit tree. Use manual entry instead.')\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return null\n    }\n    return this.props.children\n  }\n}\n\nexport const TransferModal: React.FC<TransferModalProps> = ({\n  initialTeiId = '',\n  programId = '',\n  currentOrgUnitId = '',\n  onClose,\n  mode = 'modal',\n}) => {\n  const engine = useDataEngine()\n  const { data: rootsData } = useDataQuery(rootsQuery)\n\n  const [teiId] = useState(initialTeiId)\n  const [selectedPaths, setSelectedPaths] = useState<string[]>([])\n  const [selectedOuId, setSelectedOuId] = useState<string | null>(null)\n  const [selectedOu, setSelectedOu] = useState<OrgUnit | null>(null)\n  const [currentOuId, setCurrentOuId] = useState<string>(currentOrgUnitId)\n  const [currentOuName, setCurrentOuName] = useState<string | null>(null)\n  const [errorMessage, setErrorMessage] = useState<string | null>(null)\n  const [statusMessage, setStatusMessage] = useState<string | null>(null)\n  const [treeError, setTreeError] = useState<string | null>(null)\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [searchText, setSearchText] = useState('')\n  const [searchResults, setSearchResults] = useState<OrgUnit[]>([])\n  const [searchError, setSearchError] = useState<string | null>(null)\n  const [isSearching, setIsSearching] = useState(false)\n\n  const debouncedSearchText = useDebouncedValue(searchText, SEARCH_DEBOUNCE_MS)\n\n  const roots = useMemo(() => {\n    const orgUnits = rootsData?.roots?.organisationUnits\n    if (!Array.isArray(orgUnits)) {\n      return []\n    }\n    return orgUnits\n      .filter((ou: OrgUnit | null | undefined) => ou && typeof ou.id === 'string')\n      .map((ou: OrgUnit) => ou.id)\n  }, [rootsData])\n\n  useEffect(() => {\n    if (currentOrgUnitId) {\n      setCurrentOuId(currentOrgUnitId)\n    }\n  }, [currentOrgUnitId])\n\n  useEffect(() => {\n    if (!teiId || currentOuId) {\n      return\n    }\n\n    let isActive = true\n\n    const loadCurrentOrgUnit = async () => {\n      try {\n        const { tei } = await engine.query({\n          tei: {\n            resource: `tracker/trackedEntities/${teiId}`,\n            params: {\n              fields: 'orgUnit',\n            },\n          },\n        })\n\n        if (!isActive) {\n          return\n        }\n\n        const trackedEntity = tei as { orgUnit?: string }\n        if (trackedEntity.orgUnit) {\n          setCurrentOuId(trackedEntity.orgUnit)\n        }\n      } catch (error) {\n        if (!isActive) {\n          return\n        }\n      }\n    }\n\n    loadCurrentOrgUnit()\n\n    return () => {\n      isActive = false\n    }\n  }, [teiId, currentOuId, engine])\n\n  useEffect(() => {\n    if (!currentOuId) {\n      setCurrentOuName(null)\n      return\n    }\n\n    let isActive = true\n\n    const loadCurrentOrgUnitName = async () => {\n      try {\n        const { ou } = await engine.query({\n          ou: {\n            resource: `organisationUnits/${currentOuId}`,\n            params: {\n              fields: 'id,displayName',\n            },\n          },\n        })\n\n        if (!isActive) {\n          return\n        }\n\n        const orgUnit = ou as OrgUnit\n        setCurrentOuName(orgUnit.displayName || null)\n      } catch (error) {\n        if (!isActive) {\n          return\n        }\n        setCurrentOuName(null)\n      }\n    }\n\n    loadCurrentOrgUnitName()\n\n    return () => {\n      isActive = false\n    }\n  }, [currentOuId, engine])\n\n  useEffect(() => {\n    let isActive = true\n\n    const loadOrgUnit = async () => {\n      if (!selectedOuId) {\n        setSelectedOu(null)\n        return\n      }\n\n      try {\n        const { ou } = await engine.query({\n          ou: {\n            resource: `organisationUnits/${selectedOuId}`,\n            params: {\n              fields: 'id,displayName,path',\n            },\n          },\n        })\n\n        if (!isActive) {\n          return\n        }\n\n        setSelectedOu(ou as OrgUnit)\n      } catch (error) {\n        if (!isActive) {\n          return\n        }\n        setErrorMessage(getValidationMessage(error))\n      }\n    }\n\n    loadOrgUnit()\n\n    return () => {\n      isActive = false\n    }\n  }, [selectedOuId, engine])\n\n  useEffect(() => {\n    if (mode !== 'inline') {\n      return\n    }\n\n    window.setTimeout(() => {\n      const searchInput = document.querySelector<HTMLInputElement>(\n        '[data-test=\"tei-transfer-search\"] input'\n      )\n      searchInput?.focus()\n    }, 0)\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        event.preventDefault()\n        onClose()\n      }\n    }\n\n    window.addEventListener('keydown', handleKeyDown)\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown)\n    }\n  }, [mode, onClose])\n\n  useEffect(() => {\n    const trimmed = debouncedSearchText.trim()\n    if (trimmed.length < MIN_SEARCH_LENGTH) {\n      setSearchResults([])\n      setSearchError(null)\n      setIsSearching(false)\n      return\n    }\n\n    let isActive = true\n    setIsSearching(true)\n    setSearchError(null)\n\n    const loadSearchResults = async () => {\n      try {\n        const { orgUnits } = await engine.query({\n          orgUnits: {\n            resource: 'organisationUnits',\n            params: {\n              filter: `displayName:ilike:${trimmed}`,\n              fields: 'id,displayName',\n              paging: true,\n              pageSize: 15,\n            },\n          },\n        })\n\n        if (!isActive) {\n          return\n        }\n\n        const results = orgUnits?.organisationUnits\n        if (Array.isArray(results)) {\n          setSearchResults(results as OrgUnit[])\n        } else {\n          setSearchResults([])\n        }\n      } catch (error) {\n        if (!isActive) {\n          return\n        }\n        setSearchError('Failed to search org units.')\n        setSearchResults([])\n      } finally {\n        if (isActive) {\n          setIsSearching(false)\n        }\n      }\n    }\n\n    loadSearchResults()\n\n    return () => {\n      isActive = false\n    }\n  }, [debouncedSearchText, engine])\n\n  const descriptionLabel = useMemo(() => {\n    if (currentOuName) {\n      return currentOuName\n    }\n    if (currentOuId) {\n      return currentOuId\n    }\n    return 'Unknown org unit'\n  }, [currentOuId, currentOuName])\n\n  const destinationOuId = selectedOuId?.trim() ?? ''\n  const isSameOrgUnit = Boolean(currentOuId && destinationOuId && currentOuId === destinationOuId)\n  const isTransferEnabled = Boolean(\n    teiId && programId && destinationOuId && !isSameOrgUnit && !isSubmitting\n  )\n\n  const handleTransfer = async () => {\n    if (!teiId || !programId || !destinationOuId || isSameOrgUnit) {\n      return\n    }\n\n    setIsSubmitting(true)\n    setStatusMessage(null)\n    setErrorMessage(null)\n\n    try {\n      const attemptTransfer = async (paramName: 'trackedEntity' | 'trackedEntityInstance') =>\n        engine.mutate({\n          resource: 'tracker/ownership/transfer',\n          type: 'update',\n          params: {\n            [paramName]: teiId,\n            program: programId,\n            ou: destinationOuId,\n          },\n          data: {\n            trackedEntity: teiId,\n            program: programId,\n            orgUnit: destinationOuId,\n          },\n        })\n\n      try {\n        await attemptTransfer('trackedEntity')\n      } catch (error) {\n        if (isUnknownParamError(error, 'trackedEntity')) {\n          await attemptTransfer('trackedEntityInstance')\n        } else {\n          throw error\n        }\n      }\n\n      const { tei } = await engine.query({\n        tei: {\n          resource: `tracker/trackedEntities/${teiId}`,\n          params: {\n            fields: trackerFields,\n          },\n        },\n      })\n\n      const trackedEntity = tei as TrackedEntity\n      const enrollmentToUpdate = trackedEntity.enrollments?.find(\n        (enrollment) => enrollment.program === programId\n      )\n\n      if (UPDATE_ENROLLMENT_ORGUNIT && enrollmentToUpdate?.enrollment) {\n        await engine.mutate({\n          resource: 'tracker',\n          type: 'create',\n          data: {\n            enrollments: [\n              {\n                enrollment: enrollmentToUpdate.enrollment,\n                program: programId,\n                trackedEntity: trackedEntity.trackedEntity || teiId,\n                orgUnit: destinationOuId,\n              },\n            ],\n          },\n          params: {\n            async: false,\n            importStrategy: 'UPDATE',\n          },\n        })\n      }\n\n      const eventsToUpdate =\n        enrollmentToUpdate?.events?.map((event) => ({\n          event: event.event,\n          program: event.program,\n          programStage: event.programStage,\n          enrollment: enrollmentToUpdate.enrollment,\n          orgUnit: destinationOuId,\n          status: event.status,\n          occurredAt: event.occurredAt,\n          scheduledAt: event.scheduledAt,\n        })) ?? []\n\n      if (eventsToUpdate.length > 0) {\n        await engine.mutate({\n          resource: 'tracker',\n          type: 'create',\n          data: {\n            events: eventsToUpdate,\n          },\n          params: {\n            async: false,\n            importStrategy: 'UPDATE',\n          },\n        })\n      }\n\n      setStatusMessage('Transfer completed.')\n    } catch (error) {\n      const message = getValidationMessage(error)\n      setErrorMessage(message)\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  const content = (\n    <Box display=\"flex\" flexDirection=\"column\" gap=\"16px\">\n      {!teiId && (\n        <NoticeBox warning title=\"Missing TEI context\">\n          No tracked entity was provided by Capture. Open this widget from a TEI enrollment.\n        </NoticeBox>\n      )}\n\n      {!programId && (\n        <NoticeBox warning title=\"Missing program context\">\n          No program was provided by Capture. Open this widget from a program enrollment.\n        </NoticeBox>\n      )}\n\n      {isSameOrgUnit && (\n        <NoticeBox warning title=\"Destination org unit unchanged\">\n          Choose a different org unit to transfer this case.\n        </NoticeBox>\n      )}\n\n      <Box style={{ fontSize: 14 }}>\n        From <strong>{descriptionLabel}</strong> to\n      </Box>\n\n      <Field label=\"Destination Org Unit\">\n        <Box display=\"flex\" flexDirection=\"column\" gap=\"8px\">\n          <Input\n            value={searchText}\n            onChange={({ value }) => setSearchText(value)}\n            placeholder=\"Search org units\"\n            dataTest=\"tei-transfer-search\"\n          />\n          {searchError && (\n            <NoticeBox warning title=\"Search unavailable\">\n              {searchError}\n            </NoticeBox>\n          )}\n          {isSearching && (\n            <Box style={{ fontSize: 12, color: '#556070' }}>Searching...</Box>\n          )}\n          {debouncedSearchText.trim().length >= MIN_SEARCH_LENGTH &&\n            !isSearching &&\n            searchResults.length > 0 && (\n              <Box\n                style={{\n                  border: '1px solid #e8edf2',\n                  borderRadius: 6,\n                  background: '#fff',\n                  maxHeight: 160,\n                  overflowY: 'auto',\n                }}\n              >\n                {searchResults.map((orgUnit) => (\n                  <button\n                    key={orgUnit.id}\n                    type=\"button\"\n                    onClick={() => {\n                      setSelectedOuId(orgUnit.id)\n                      setSelectedPaths([orgUnit.id])\n                      setSearchText(orgUnit.displayName)\n                      setSearchResults([])\n                    }}\n                    style={{\n                      width: '100%',\n                      padding: '8px',\n                      textAlign: 'left',\n                      background: 'transparent',\n                      border: 'none',\n                      borderBottom: '1px solid #f0f3f6',\n                      cursor: 'pointer',\n                    }}\n                  >\n                    {orgUnit.displayName}\n                  </button>\n                ))}\n              </Box>\n            )}\n          {debouncedSearchText.trim().length >= MIN_SEARCH_LENGTH &&\n            !isSearching &&\n            searchResults.length === 0 && (\n              <Box style={{ fontSize: 12, color: '#556070' }}>\n                No matching org units.\n              </Box>\n            )}\n        </Box>\n        {treeError ? (\n          <>\n            <NoticeBox warning title=\"Org unit tree unavailable\">\n              {treeError}\n            </NoticeBox>\n            <Box marginTop=\"12px\">\n              <Input\n                value={selectedOuId ?? ''}\n                onChange={({ value }) => setSelectedOuId(value)}\n                placeholder=\"Enter destination org unit UID\"\n              />\n            </Box>\n          </>\n        ) : roots.length === 0 ? (\n          <NoticeBox warning title=\"Org unit tree unavailable\">\n            No root org units were loaded. Check your user org unit access.\n          </NoticeBox>\n        ) : (\n          <Box\n            padding=\"8px\"\n            overflow=\"auto\"\n            style={{\n              background: '#fff',\n              borderRadius: 6,\n              border: '1px solid #e8edf2',\n              minHeight: 420,\n              height: 480,\n              flexShrink: 0,\n            }}\n          >\n            <TreeErrorBoundary onError={(message) => setTreeError(message)}>\n              <OrganisationUnitTree\n                roots={roots}\n                selected={selectedPaths}\n                singleSelection\n                onChange={({ selected, id }: { selected: string[]; id: string }) => {\n                  const lastSelected = selected.filter(Boolean).slice(-1)\n                  setSelectedPaths(lastSelected)\n                  setSelectedOuId(id)\n                }}\n              />\n            </TreeErrorBoundary>\n          </Box>\n        )}\n      </Field>\n\n      {selectedOu && (\n        <Field label=\"Selected Org Unit\">\n          <Input value={`${selectedOu.displayName} (${selectedOu.id})`} readOnly />\n        </Field>\n      )}\n\n      {errorMessage && (\n        <NoticeBox error title=\"Transfer failed\">\n          {errorMessage}\n        </NoticeBox>\n      )}\n\n      {statusMessage && <NoticeBox title=\"Success\">{statusMessage}</NoticeBox>}\n    </Box>\n  )\n\n  if (mode === 'inline') {\n    return (\n      <Box\n        padding=\"16px\"\n        width=\"100%\"\n        maxWidth=\"100%\"\n        border=\"1px solid #e8edf2\"\n        background=\"#fff\"\n        boxShadow=\"0 1px 3px rgba(0, 0, 0, 0.12)\"\n        dataTest=\"tei-transfer-panel\"\n        style={{\n          minHeight: 720,\n          height: 720,\n          display: 'flex',\n          flexDirection: 'column',\n          overflow: 'hidden',\n        }}\n      >\n        <Box marginBottom=\"12px\" style={{ textAlign: 'center' }}>\n          <strong>Transfer case</strong>\n        </Box>\n        <Box style={{ flex: '1 1 auto', minHeight: 0 }}>\n          <Box style={{ height: 560, overflow: 'auto' }}>{content}</Box>\n        </Box>\n        <Box marginTop=\"16px\">\n          <ButtonStrip end>\n            <Button secondary onClick={onClose}>\n              Close\n            </Button>\n            <Button\n              primary\n              onClick={handleTransfer}\n              disabled={!isTransferEnabled}\n              loading={isSubmitting}\n            >\n              Transfer\n            </Button>\n          </ButtonStrip>\n        </Box>\n      </Box>\n    )\n  }\n\n  return (\n    <Modal\n      position=\"middle\"\n      large\n      fluid\n      onClose={onClose}\n      dataTest=\"tei-transfer-modal\"\n    >\n      <ModalTitle>Transfer TEI</ModalTitle>\n      <ModalContent>{content}</ModalContent>\n      <ModalActions>\n        <ButtonStrip end>\n          <Button secondary onClick={onClose}>\n            Close\n          </Button>\n          <Button\n            primary\n            onClick={handleTransfer}\n            disabled={!isTransferEnabled}\n            loading={isSubmitting}\n          >\n            Transfer\n          </Button>\n        </ButtonStrip>\n      </ModalActions>\n    </Modal>\n  )\n}\n","import React, { useMemo, useState } from 'react'\nimport { Box, Button, theme } from '@dhis2/ui'\nimport { TransferModal } from './components/TransferModal'\nimport './Plugin.css'\n\ntype PluginProps = {\n  trackedEntityId?: string\n  teiId?: string\n  trackedEntity?: { id?: string }\n  programId?: string\n  program?: { id?: string }\n  enrollment?: { orgUnit?: string; program?: string }\n  orgUnitId?: string\n}\n\nconst resolveTeiId = (props: PluginProps) =>\n  props.trackedEntityId || props.teiId || props.trackedEntity?.id || ''\n\nconst Plugin: React.FC<PluginProps> = (props) => {\n  const initialTeiId = useMemo(() => resolveTeiId(props), [props])\n  const [panelOpen, setPanelOpen] = useState(false)\n\n  const handleClose = () => {\n    setPanelOpen(false)\n    window.setTimeout(() => {\n      const triggerButton = document.querySelector<HTMLButtonElement>(\n        '[data-test=\"tei-transfer-trigger\"] button'\n      )\n      triggerButton?.focus()\n    }, 0)\n  }\n\n  const resolvedProgramId =\n    props.programId || props.program?.id || props.enrollment?.program || ''\n  const resolvedOrgUnitId = props.orgUnitId || props.enrollment?.orgUnit || ''\n\n  return (\n    <Box style={{ fontFamily: theme.fonts }}>\n      {!panelOpen && (\n        <Box className=\"tei-transfer-trigger-container\">\n          <Button primary onClick={() => setPanelOpen(true)} dataTest=\"tei-transfer-trigger\">\n            TRANSFER CASE\n          </Button>\n        </Box>\n      )}\n      {panelOpen && (\n        <Box marginTop=\"12px\">\n          <TransferModal\n            initialTeiId={initialTeiId}\n            programId={resolvedProgramId}\n            currentOrgUnitId={resolvedOrgUnitId}\n            onClose={handleClose}\n            mode=\"inline\"\n          />\n        </Box>\n      )}\n    </Box>\n  )\n}\n\nexport default Plugin\n"],"names":["isEmpty","value","requiredIfFactory","condition","propType","isRequired","props","propName","componentName","propValue","propTypes","requiredIf","fn","commonStyles","colors","CheckboxRegular","_ref","className","React","_JSXStyle","PropTypes","CheckboxDense","_ref2","_defineProperty","e","r","t","_toPropertyKey","i","_toPrimitive","Checkbox","Component","createRef","prevProps","indeterminate","checked","disabled","error","label","name","tabIndex","valid","warning","dense","dataTest","classes","cx","theme","spacers","uniqueOnStatePropType","mutuallyExclusive","sharedPropTypes.statusPropType","Leaves","children","open","Spacer","ArrowDown","Toggle","onOpen","onClose","onClick","event","Node","icon","hasLeaves","showArrow","showSpacer","isPathIncluded","includedPaths","path","includedPath","leftTrimToRootId","rootId","sortNodeChildrenAlphabetically","left","right","namespace","i18n","arTranslations","csTranslations","enTranslations","esTranslations","es_419Translations","frTranslations","loTranslations","nbTranslations","nlTranslations","ptTranslations","ruTranslations","ukTranslations","uz_LatnTranslations","uz_UZ_CyrlTranslations","uz_UZ_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","UNIT_ID_PATTERN","orgUnitPathRegExp","orgUnitPathPropType","key","compName","location","propFullName","ErrorMessage","hasDescendantSelectedPaths","selected","selectedPath","isNotPath","isSubPath","SingleSelectionLabel","onChange","loading","DisabledSelectionLabel","onToggleOpen","IconEmpty","IconFolderClosed","IconFolderOpen","IconSingle","Icon","hasChildren","IconizedCheckbox","checkboxLabel","LabelContainer","highlighted","createNewSelected","singleSelection","pathIndex","prevSlice","nextSlice","Label","disableSelection","fullPath","hasSelectedDescendants","node","_ref3","newSelected","payload","loadingSpinnerStyles","LoadingSpinner","CircularLoader","ORG_DATA_QUERY","id","useOrgChildren","suppressAlphabeticalSorting","onComplete","onCompleteCalledRef","useRef","called","data","useDataQuery","orgChildren","useMemo","orgUnit","useEffect","getFilteredChildren","filter","child","OrganisationUnitNodeChildren","autoExpandLoadingError","expanded","isUserDataViewFallback","onChildrenLoaded","onCollapse","onExpand","parentPath","renderNodeLabel","OrganisationUnitNode","displayChildren","filteredChildren","childPath","useOpenState","errorMessage","autoExpand","openedOnceDueToError","setOpenedOnce","useState","useOrgData","displayName","variables","orgData","strippedPath","isHighlighted","isSelected","curPath","labelContent","showPlaceholder","showChildNodes","defaultRenderNodeLabel","filterRootIds","rootIds","OrganisationUnitTreeRootError","OrganisationUnitTreeRootLoading","removeDuplicates","arr","extractAllPathsFromPath","segments","withSubPaths","segment","index","getAllExpandedPaths","initiallyExpanded","all","allPathsInCurPath","createExpandHandlers","setExpanded","rest","updatedExpanded","useExpanded","expandedControlled","handleExpandControlled","handleCollapseControlled","isControlled","allInitiallyExpandedPaths","handleExpand","handleCollapse","useForceReload","forceReload","reloadId","setReloadId","nextReloadId","patchMissingDisplayName","nodes","nodesWithDisplayName","createRootQuery","ids","query","useRootOrgData","rootOrgUnits","refetch","patchedData","staticArray","OrganisationUnitTree","roots","prevReloadId","setPrevReloadId","isLoading","rootNode","rootsQuery","resource","params","userOnly","fields","trackerFields","UPDATE_ENROLLMENT_ORGUNIT","MIN_SEARCH_LENGTH","SEARCH_DEBOUNCE_MS","getValidationMessage","message","responseMessage","details","response","useDebouncedValue","delay","debouncedValue","setDebouncedValue","timeoutId","window","setTimeout","clearTimeout","isUnknownParamError","paramName","status","toLowerCase","includes","TreeErrorBoundary","constructor","state","hasError","getDerivedStateFromError","componentDidCatch","onError","render","TransferModal","initialTeiId","programId","currentOrgUnitId","mode","engine","useDataEngine","rootsData","teiId","selectedPaths","setSelectedPaths","selectedOuId","setSelectedOuId","selectedOu","setSelectedOu","currentOuId","setCurrentOuId","currentOuName","setCurrentOuName","setErrorMessage","statusMessage","setStatusMessage","treeError","setTreeError","isSubmitting","setIsSubmitting","searchText","setSearchText","searchResults","setSearchResults","searchError","setSearchError","isSearching","setIsSearching","debouncedSearchText","orgUnits","organisationUnits","Array","isArray","ou","map","isActive","loadCurrentOrgUnit","tei","trackedEntity","loadCurrentOrgUnitName","loadOrgUnit","searchInput","document","querySelector","focus","handleKeyDown","preventDefault","addEventListener","removeEventListener","trimmed","trim","length","paging","pageSize","results","loadSearchResults","descriptionLabel","destinationOuId","isSameOrgUnit","Boolean","isTransferEnabled","handleTransfer","attemptTransfer","mutate","type","program","enrollmentToUpdate","enrollments","find","enrollment","eventsToUpdate","events","programStage","occurredAt","scheduledAt","async","importStrategy","content","Box","jsx","NoticeBox","jsxs","fontSize","Field","Input","color","border","borderRadius","background","maxHeight","overflowY","width","padding","textAlign","borderBottom","cursor","Fragment","minHeight","height","flexShrink","lastSelected","slice","display","flexDirection","overflow","flex","ButtonStrip","Button","Modal","ModalTitle","ModalContent","ModalActions","resolveTeiId","trackedEntityId","Plugin","panelOpen","setPanelOpen","handleClose","triggerButton","resolvedProgramId","resolvedOrgUnitId","orgUnitId","fontFamily","fonts"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40]}